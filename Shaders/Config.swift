/// Config.swift
/// Централизованное хранилище всех конфигурационных констант приложения Liquid Intro Studio.
/// Обеспечивает единую точку настройки параметров рендеринга, аудио и UI.

import Foundation
import CoreGraphics

// MARK: - Глобальная конфигурация приложения
/// Пространство имён для всех конфигурационных констант.
/// Разделено на логические группы: частицы, эффекты, таймлайн, текст, экспорт.
enum Config {
    
    // MARK: - Настройки частиц
    /// Общее количество частиц в симуляции (512 × 512 сетка = 262 144).
    /// Влияет на производительность и плотность визуального эффекта.
    static let particleCount = 262_144
    
    /// Размер сетки для распределения частиц.
    /// Используется для инициализации начальных позиций.
    static let gridSize = 512
    
    /// Радиус воздействия силы касания в нормализованных координатах [-1, 1].
    /// Больший радиус = более мягкое, но широкое воздействие.
    static let forceRadius: Float = 0.18
    
    /// Базовая сила воздействия при касании.
    /// Умножается на модификаторы пресета и таймлайна.
    static let forceStrength: Float = 18.0
    
    /// Коэффициент вязкости (сопротивление движению).
    /// Значение 0.96 означает, что частица сохраняет 96% скорости за кадр.
    static let viscosity: Float = 0.96
    
    /// Базовый размер точки частицы в пикселях.
    static let baseSize: Float = 2.2
    
    // MARK: - Настройки следа (Trail)
    /// Коэффициент затухания следа за кадр.
    /// 0.985 означает, что след сохраняет 98.5% яркости.
    static let dissipation: Float = 0.985
    
    /// Коэффициент диффузии (размытия) следа.
    /// Контролирует, насколько след "растекается" по соседним пикселям.
    static let diffusion: Float = 0.24
    
    // MARK: - Настройки Bloom-эффекта
    /// Порог яркости для выделения ярких областей.
    /// Пиксели с яркостью выше этого значения попадают в bloom.
    static let bloomThreshold: Float = 0.8
    
    /// Базовая сила bloom-эффекта.
    static let bloomStrength: Float = 1.45
    
    /// Дополнительное усиление bloom от аудио-реактивности.
    static let baseBloomBoost: Float = 0.65
    
    /// Гамма-коррекция для tone mapping (стандартное значение sRGB).
    static let toneMapGamma: Float = 2.2
    
    /// Sigma для Gaussian blur (стандартное отклонение).
    static let blurSigma: Float = 5.0
    
    /// Радиус размытия в пикселях для Gaussian blur.
    static let blurRadius: UInt32 = 9
    
    // MARK: - Настройки таймлайна
    /// Общая длительность одного цикла интро в секундах.
    static let timelineTotalDuration: Float = 5.0
    
    /// Конец фазы "Хаос" (начало формирования текста).
    static let timelinePhaseOneEnd: Float = 1.0
    
    /// Конец фазы "Текст" (начало растворения).
    static let timelinePhaseTwoEnd: Float = 3.5
    
    // MARK: - Настройки текстового слоя
    /// Масштаб текстовой области относительно размера экрана.
    static let textScale: CGFloat = 0.72
    
    /// Отступ текста от краёв в пунктах.
    static let textPadding: CGFloat = 24
    
    /// Минимальный размер шрифта относительно меньшей стороны экрана.
    static let fontSizeRatio: CGFloat = 0.08
    
    // MARK: - Настройки экспорта
    /// Ширина экспортируемого видео в пикселях (4K вертикальный формат).
    static let exportWidth: Int = 2160
    
    /// Высота экспортируемого видео в пикселях (4K вертикальный формат 9:16).
    static let exportHeight: Int = 3840
    
    /// Частота кадров для экспорта.
    static let exportFPS: Double = 60.0
    
    /// Битрейт видео в битах в секунду (высокое качество).
    static let exportBitrate: Int = 50_000_000
    
    // MARK: - Аудио настройки по умолчанию
    /// BPM по умолчанию для генерации ритма.
    static let defaultBPM: Double = 82.0
    
    /// Коэффициент свинга по умолчанию (0 = ровно, 1 = максимум).
    static let defaultGroove: Double = 0.12
    
    // MARK: - Отладка
    /// Интервал логирования кадров (каждые N кадров).
    static let debugLogInterval: Int = 120
    
    /// Включить расширенное логирование производительности.
    static let enablePerformanceLogging: Bool = true
}
